<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"hujunhan.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Only Truth Matters">
<meta property="og:url" content="https://hujunhan.github.io/page/9/index.html">
<meta property="og:site_name" content="Only Truth Matters">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Junhan Hu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://hujunhan.github.io/page/9/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Only Truth Matters</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Only Truth Matters</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hujunhan.github.io/MarkdownNotes/Engineering/Robotics/Perception/Lidar/lidar-slam/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Junhan Hu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Only Truth Matters">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/MarkdownNotes/Engineering/Robotics/Perception/Lidar/lidar-slam/" class="post-title-link" itemprop="url">Lidar SLAM System Review</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-03-06 00:51:00" itemprop="dateCreated datePublished" datetime="2023-03-06T00:51:00-08:00">2023-03-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-29 23:22:29" itemprop="dateModified" datetime="2023-08-29T23:22:29-07:00">2023-08-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/" itemprop="url" rel="index"><span itemprop="name">MarkdownNotes</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/" itemprop="url" rel="index"><span itemprop="name">Engineering</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/" itemprop="url" rel="index"><span itemprop="name">Robotics</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/Perception/" itemprop="url" rel="index"><span itemprop="name">Perception</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/Perception/Lidar/" itemprop="url" rel="index"><span itemprop="name">Lidar</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Intro">1. Intro</h2><p>Review Lidar based SLAM algorithm and libraries</p>
<p>Some of the popular lib:</p>
<ul>
<li>LOAM</li>
<li><strong>LEGO LOAM</strong></li>
<li>LIO SAM</li>
</ul>
<h2 id="LOAM">2. LOAM</h2><p>Year: 2014</p>
<p>Lidar Odometry and Mapping</p>
<ul>
<li>Scan Matching</li>
<li>Odometry</li>
<li>Fast and efficient</li>
</ul>
<p>Con:</p>
<ul>
<li>Require careful parameter tuning</li>
</ul>
<h2 id="LEGO-LOAM">3. LEGO LOAM</h2><p>Year: 2018</p>
<p>Lightweight and Ground-Optimized Lidar Odometry and Mapping</p>
<ul>
<li>Use line and point feature extraction to increase the robustness</li>
<li>More robust to sensor noise and calibration error</li>
</ul>
<h2 id="LIO-SAM">4. LIO SAM</h2><p>Year: 2018</p>
<p>Lidar Inertial Odometry and Mapping via Smoothing and Mapping</p>
<ul>
<li>Tightly couple with inertial sensor</li>
<li>Fuse sensor to estimate</li>
<li>Computation Intensive</li>
</ul>
<h2 id="LOCUS">5. LOCUS</h2><p><a target="_blank" rel="noopener" href="https://github.com/NeBula-Autonomy/LOCUS">Repo</a></p>
<p><img src="https://raw.githubusercontent.com/hujunhan/cloudimage/master/img/20230306214826.gif" alt="locus-demo"></p>
<h2 id="Ref">6. Ref</h2><p><a target="_blank" rel="noopener" href="https://www.aia-polytech.be/wp-content/uploads/2021/01/EvaluationAndComparisonOf3DLidarBasedSLAMAlgorithms.pdf">Evaluation and comparison of 3D lidar based SLAM algorithms</a></p>
<h2 id="Question">7. Question</h2><ol>
<li>从一个开源项目到实际部署到机器人的过程中，有哪些要注意的地方</li>
<li>大概需要怎样的性能</li>
</ol>
<p>室内场景更加复杂</p>
<p>仓储机器人</p>
<p>激光雷达，传感器融合，</p>
<p>IMU: Bosch, ADA</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hujunhan.github.io/MarkdownNotes/Engineering/Robotics/Perception/Lidar/liosam_problem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Junhan Hu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Only Truth Matters">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/MarkdownNotes/Engineering/Robotics/Perception/Lidar/liosam_problem/" class="post-title-link" itemprop="url">Problem Calibrating Lidar and IMU</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-03-06 00:51:00" itemprop="dateCreated datePublished" datetime="2023-03-06T00:51:00-08:00">2023-03-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-29 23:22:29" itemprop="dateModified" datetime="2023-08-29T23:22:29-07:00">2023-08-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/" itemprop="url" rel="index"><span itemprop="name">MarkdownNotes</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/" itemprop="url" rel="index"><span itemprop="name">Engineering</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/" itemprop="url" rel="index"><span itemprop="name">Robotics</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/Perception/" itemprop="url" rel="index"><span itemprop="name">Perception</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/Perception/Lidar/" itemprop="url" rel="index"><span itemprop="name">Lidar</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="背景">1. 背景</h2><p>硬件：</p>
<ul>
<li>雷神雷达C16</li>
<li>16线</li>
<li>每线2000点</li>
<li>北斗星通MS-6111 六轴IMU</li>
<li>xyz加速度</li>
<li>角速度</li>
</ul>
<p>软件</p>
<ul>
<li>校准：<a target="_blank" rel="noopener" href="https://github.com/chennuo0125-HIT/lidar_imu_calib">lidar_imu_calib</a></li>
<li>开启雷达和IMU的ros节点</li>
<li>rosbag记录，同时移动雷达和IMU</li>
<li>计算IMU和雷达之间的位姿转换矩阵（只计算旋转）</li>
<li>SLAM：<a target="_blank" rel="noopener" href="https://github.com/YJZLuckyBoy/liorf">liorf</a></li>
<li>LIO-SAM的变种，可以接收六轴传感器</li>
</ul>
<h2 id="问题">2. 问题</h2><p>SLAM能够正常启动和运行，但是里程计会漂移，有很大的误差</p>
<img src="https://raw.githubusercontent.com/hujunhan/cloudimage/master/img/20230329185739.png" alt="image-20230329185739433" style="zoom: 50%;">

<p>观察到的现象</p>
<ul>
<li>在平地时，IMU数据的x,y均有值。0.1m&#x2F;s^2左右</li>
<li>里程计显示速度越来越快</li>
</ul>
<h2 id="猜测原因">3. 猜测原因</h2><ul>
<li>雷达和imu校准不准确，算出来的矩阵有问题</li>
<li>由于雷达和imu频率不同导致的同步问题</li>
<li>imu没有调平</li>
</ul>
<h2 id="解决办法">4. 解决办法</h2><ol>
<li>IMU内参标定</li>
<li>IMU和雷达外参标定</li>
<li>调平</li>
<li>时间戳同步</li>
<li>排查静止时输入到前段的数据，如点云，测距精度，噪声，频率，时间戳</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hujunhan.github.io/MarkdownNotes/Nature%20Science/Mathematics/Optimization/BFGS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Junhan Hu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Only Truth Matters">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/MarkdownNotes/Nature%20Science/Mathematics/Optimization/BFGS/" class="post-title-link" itemprop="url">BFGS in Optimization</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-03-04 21:39:00" itemprop="dateCreated datePublished" datetime="2023-03-04T21:39:00-08:00">2023-03-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-29 23:22:29" itemprop="dateModified" datetime="2023-08-29T23:22:29-07:00">2023-08-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/" itemprop="url" rel="index"><span itemprop="name">MarkdownNotes</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Nature-Science/" itemprop="url" rel="index"><span itemprop="name">Nature Science</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Nature-Science/Mathematics/" itemprop="url" rel="index"><span itemprop="name">Mathematics</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Nature-Science/Mathematics/Optimization/" itemprop="url" rel="index"><span itemprop="name">Optimization</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="What">1. What</h2><p>Broyden-Fletcher-Goldfarb-Shanno</p>
<ul>
<li>Quasi-Newton optimization algorithm</li>
<li><strong>Gradient based</strong>: use first derivative of th objective function to improve the solution</li>
<li>differnce of different algorithm: how to update the parameters</li>
<li>first derivative</li>
<li>hessian matrix – BFGS</li>
<li>Maintain an approximation of the Hessian</li>
</ul>
<h2 id="How">2. How</h2><p>Find the minimum, the gradient is known or calculated<br>$$<br>B_{k+1} &#x3D; B_k + \frac{(\Delta \theta_k)(\Delta \theta_k)^T}{(\Delta \theta_k)^T \Delta g_k} - \frac{B_k \Delta g_k (\Delta g_k)^T B_k}{(\Delta g_k)^T B_k \Delta g_k}<br>$$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bfgs</span>(<span class="params">f, grad_f, x0, epsilon=<span class="number">1e-6</span>, max_iter=<span class="number">1000</span></span>):</span><br><span class="line">n = <span class="built_in">len</span>(x0)</span><br><span class="line">Bk = np.eye(n) <span class="comment"># initialize Hessian approximation</span></span><br><span class="line">xk = x0</span><br><span class="line">gk = grad_f(xk)</span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(max_iter):</span><br><span class="line"><span class="keyword">if</span> np.linalg.norm(gk) &lt; epsilon:</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">pk = -np.dot(Bk, gk)</span><br><span class="line">alpha = backtracking_line_search(f, grad_f, xk, pk)</span><br><span class="line">xk_next = xk + alpha*pk</span><br><span class="line">sk = xk_next - xk</span><br><span class="line">yk = grad_f(xk_next) - gk <span class="comment"># update the second order derivative</span></span><br><span class="line">Bk_next = Bk + np.outer(yk, yk)/np.dot(yk, sk) - np.outer(np.dot(Bk, sk), np.dot(Bk, sk))/np.dot(sk, np.dot(Bk, sk))</span><br><span class="line">xk, gk, Bk = xk_next, grad_f(xk_next), Bk_next</span><br><span class="line"><span class="keyword">return</span> xk</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Ref">3. Ref</h2><p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Broyden%E2%80%93Fletcher%E2%80%93Goldfarb%E2%80%93Shanno_algorithm">Wiki</a></p>
<p>ChatGPT</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hujunhan.github.io/MarkdownNotes/Engineering/Robotics/Action/Kinematics/trac-ik/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Junhan Hu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Only Truth Matters">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/MarkdownNotes/Engineering/Robotics/Action/Kinematics/trac-ik/" class="post-title-link" itemprop="url">Trac-IK Paper Review</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-03-04 20:58:21" itemprop="dateCreated datePublished" datetime="2023-03-04T20:58:21-08:00">2023-03-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-29 23:22:29" itemprop="dateModified" datetime="2023-08-29T23:22:29-07:00">2023-08-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/" itemprop="url" rel="index"><span itemprop="name">MarkdownNotes</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/" itemprop="url" rel="index"><span itemprop="name">Engineering</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/" itemprop="url" rel="index"><span itemprop="name">Robotics</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/Action/" itemprop="url" rel="index"><span itemprop="name">Action</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/Action/Kinematics/" itemprop="url" rel="index"><span itemprop="name">Kinematics</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Goal">1. Goal</h2><p>In the paper, author compared some common open-source project address the kinematics problem. I want to know</p>
<ul>
<li>Which optimization method is used behind these popular project</li>
<li>How these project compared to each other</li>
</ul>
<h2 id="Introduciton">2. Introduciton</h2><p>The main purpose if trac_ik is to improve the popular KDL</p>
<p>Issue with KDL</p>
<ul>
<li><p>convergence failure</p>
</li>
<li><p>stuck in local minima</p>
</li>
<li><p>loop for maximum <strong>time</strong> rather than <strong>iteration</strong></p>
</li>
<li><p>Detect by $q_{next}-q_{prev}\approx 0$</p>
</li>
<li><p>Change to a random seed</p>
</li>
<li><p>Failure with joint limit</p>
</li>
<li><p>solved with SQP sequential quadratic programming</p>
</li>
<li><p>no utilization of tolerance</p>
</li>
</ul>
<h2 id="Candidate-IK-Algorithm">3. Candidate IK Algorithm</h2><ul>
<li><p>KDL-RR</p>
</li>
<li><p>Random Restart</p>
</li>
<li><p>maximum time</p>
</li>
<li><p>SQP: SLSQP with BFGS<br>$$<br>\arg \min <em>{q \in \mathbf{R}^n}\left(q</em>{\text {seed }}-q\right)^T\left(q_{\text {seed }}-q\right),<br>$$</p>
</li>
<li><p>SQP-DQ: dual quaternion</p>
</li>
<li><p>combine the translation and orientation</p>
</li>
<li><p>$$<br>\phi_{D Q}&#x3D;4\left((\log \hat{e}) \cdot(\log \hat{e})^T\right)<br>$$</p>
</li>
<li><p>SQP-SS and SQP-L2, $p$ as simple 6-element vector</p>
</li>
<li><p>SS: $\phi_{S S}&#x3D;p_{e r r} \cdot p_{e r r}^T$</p>
</li>
<li><p>L2: $\phi_{L 2}&#x3D;\sqrt{p_{e r r} \cdot p_{e r r}^T} .$</p>
</li>
<li><p>Trac-ik</p>
</li>
<li><p>Run two algorithm at once</p>
</li>
<li><p>SQP-SS</p>
</li>
<li><p>KDL-RR</p>
</li>
<li><p>Use the fastest one</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hujunhan.github.io/MarkdownNotes/Engineering/Robotics/Action/Kinematics/ik/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Junhan Hu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Only Truth Matters">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/MarkdownNotes/Engineering/Robotics/Action/Kinematics/ik/" class="post-title-link" itemprop="url">Inverse Kinematics</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-02-28 22:36:21" itemprop="dateCreated datePublished" datetime="2023-02-28T22:36:21-08:00">2023-02-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-29 23:22:29" itemprop="dateModified" datetime="2023-08-29T23:22:29-07:00">2023-08-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/" itemprop="url" rel="index"><span itemprop="name">MarkdownNotes</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/" itemprop="url" rel="index"><span itemprop="name">Engineering</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/" itemprop="url" rel="index"><span itemprop="name">Robotics</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/Action/" itemprop="url" rel="index"><span itemprop="name">Action</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/Action/Kinematics/" itemprop="url" rel="index"><span itemprop="name">Kinematics</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Goal">1. Goal</h2><p>Given a goal in world coordinates, should calculate the robot joint angle that end-effector would result in the desired goal</p>
<ul>
<li>Position</li>
<li>Orientation</li>
</ul>
<h2 id="Method">2. Method</h2><p><a target="_blank" rel="noopener" href="http://math.ucsd.edu/~sbuss/ResearchWeb/ikmethods/iksurvey.pdf">Ref</a></p>
<h3 id="Jacobian-Transpose">2.1. Jacobian Transpose</h3><p>Idea: Virtual force</p>
<p>How: Taking the transpose of Jacobian, multiplying by error, use the velocity to update the joint angle</p>
<p>Pro: fast, easy to implement</p>
<p>Con: lead to singularities, numerical instablity</p>
<h3 id="Pseudo-inverse-Jacobian">2.2. Pseudo-inverse Jacobian</h3><p>How: taking the pseudo-inverse of jacobian matrix, multiplying by error, use the velocity to update the joint angle</p>
<p>Pro: more robust than transpose</p>
<p>Con: result in larger joint velocity and longer convergence time</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">iteration=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">current_xyz=self.fk_lambda(current_angle)[:<span class="number">3</span>,<span class="number">3</span>]</span><br><span class="line">error=np.linalg.norm(current_xyz-target_xyz)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> error&gt;threshold <span class="keyword">and</span> iteration&lt;max_iteration:</span><br><span class="line">J=self.Jac(current_angle) <span class="comment">## get the jacobian matrix</span></span><br><span class="line">delta_xyz=target_xyz-current_xyz <span class="comment">## get the error</span></span><br><span class="line"></span><br><span class="line">angle_delta=np.dot(J.T,delta_xyz) <span class="comment">## the key step</span></span><br><span class="line">current_angle+=alpha*angle_delta <span class="comment">## update the joint angle</span></span><br><span class="line">current_xyz=self.fk_lambda(current_angle)[:<span class="number">3</span>,<span class="number">3</span>]</span><br><span class="line">error=np.linalg.norm(current_xyz-target_xyz)</span><br><span class="line">iteration+=<span class="number">1</span></span><br></pre></td></tr></table></figure>



<h3 id="Damped-Least-Square">2.3. Damped Least Square</h3><p>How: adding a damping factor to the pseudo-inverse method</p>
<p>Pro: improved stability and convergence</p>
<p>Con: more computationally intensive</p>
<h3 id="Optimization-Based">2.4. Optimization Based</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">joint_limits=np.zeros((<span class="number">7</span>,<span class="number">2</span>))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">7</span>):</span><br><span class="line">joint_limits[i,<span class="number">0</span>]=self.joint_list[i][<span class="string">&#x27;bounds&#x27;</span>][<span class="number">0</span>]</span><br><span class="line">joint_limits[i,<span class="number">1</span>]=self.joint_list[i][<span class="string">&#x27;bounds&#x27;</span>][<span class="number">0</span>]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">objective_function</span>(<span class="params">joint_angle</span>):</span><br><span class="line">current_xyz=self.fk_lambda(joint_angle)[:<span class="number">3</span>,<span class="number">3</span>]</span><br><span class="line">error=np.linalg.norm(current_xyz-target_xyz)</span><br><span class="line"><span class="comment"># print(error)</span></span><br><span class="line"><span class="keyword">return</span> error</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">inequality_constraint</span>(<span class="params">joint_angle</span>):</span><br><span class="line">ineq= np.concatenate((joint_angle[:<span class="number">6</span>] -joint_limits[:<span class="number">6</span>,<span class="number">0</span>], joint_limits[:<span class="number">6</span>, <span class="number">1</span>] - joint_angle[:<span class="number">6</span>])).flatten()</span><br><span class="line"><span class="comment"># print(ineq.shape)</span></span><br><span class="line"><span class="keyword">return</span> ineq</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">equality_constraint</span>(<span class="params">joint_angle</span>):</span><br><span class="line">current_xyz=self.fk_lambda(joint_angle)[:<span class="number">3</span>,<span class="number">3</span>]</span><br><span class="line">error=current_xyz-target_xyz</span><br><span class="line"><span class="keyword">return</span> error</span><br><span class="line">cons = [</span><br><span class="line">&#123;<span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;ineq&#x27;</span>, <span class="string">&#x27;fun&#x27;</span>: inequality_constraint&#125;]</span><br><span class="line"><span class="comment"># cons=[</span></span><br><span class="line"><span class="comment">#     NonlinearConstraint(equality_constraint,0,0)</span></span><br><span class="line"><span class="comment"># ]</span></span><br><span class="line">result = minimize(objective_function, current_angle, method=<span class="string">&#x27;SLSQP&#x27;</span>, tol=<span class="number">1e-6</span>,constraints=<span class="literal">None</span>, options=&#123;<span class="string">&#x27;disp&#x27;</span>: <span class="literal">True</span>,<span class="string">&#x27;maxiter&#x27;</span>:<span class="number">1000</span>&#125;)</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hujunhan.github.io/MarkdownNotes/Engineering/Robotics/Action/Kinematics/jacobian/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Junhan Hu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Only Truth Matters">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/MarkdownNotes/Engineering/Robotics/Action/Kinematics/jacobian/" class="post-title-link" itemprop="url">Jacobian Matrix for Robot Arm</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-02-27 19:36:21" itemprop="dateCreated datePublished" datetime="2023-02-27T19:36:21-08:00">2023-02-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-29 23:22:29" itemprop="dateModified" datetime="2023-08-29T23:22:29-07:00">2023-08-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/" itemprop="url" rel="index"><span itemprop="name">MarkdownNotes</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/" itemprop="url" rel="index"><span itemprop="name">Engineering</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/" itemprop="url" rel="index"><span itemprop="name">Robotics</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/Action/" itemprop="url" rel="index"><span itemprop="name">Action</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/Action/Kinematics/" itemprop="url" rel="index"><span itemprop="name">Kinematics</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="What-is-Jacobian-Matrix">1. What is Jacobian Matrix</h2><p>The Jacobian matrix is a matrix of partial derivatives that describes the rate of change of a system with respect to its variables. In other words, it relates the <strong>change in inpu</strong>t variables to the <strong>change in output variables</strong>. The Jacobian matrix is commonly used in multivariable calculus and in the fields of physics, engineering, and robotics.</p>
<p>For example, consider a robotic arm with n degrees of freedom. The state of the robot can be described by a set of joint angles q &#x3D; (q1, q2, …, qn), and the position of the end-effector can be described by a vector x &#x3D; (x, y, z). The Jacobian matrix J relates the joint angles to the end-effector position:<br>$$<br>\frac{\partial x}{\partial q_1} &amp; \frac{\partial x}{\partial q_2} &amp; \cdots &amp; \frac{\partial x}{\partial q_n}\<br>\frac{\partial y}{\partial q_1} &amp; \frac{\partial y}{\partial q_2} &amp; \cdots &amp; \frac{\partial y}{\partial q_n}\<br>\frac{\partial z}{\partial q_1} &amp; \frac{\partial z}{\partial q_2} &amp; \cdots &amp; \frac{\partial z}{\partial q_n}<br>$$</p>
<h2 id="Jacobian-for-Robot-Arm">2. Jacobian for Robot Arm</h2><p>In robotics, the Jacobian matrix is used to calculate the end-effector velocity given the joint velocities. This is important for controlling the motion of a robotic arm, as it allows us to <strong>determine the joint velocities required to achieve a desired end-effector velocity</strong>.</p>
<p>To calculate the Jacobian matrix for a robotic arm, we need to know the kinematic structure of the arm. This can be described using a URDF (Unified Robot Description Format) file, which defines the joint types, joint limits, and link lengths of the arm. Once we have the URDF file, we can derive the jacobian matrix mannauly</p>
<h2 id="Jacobian-for-Inverse-Kinematics">3. Jacobian for Inverse Kinematics</h2><p>Inverse kinematics is a challenging problem in robotics, as it requires solving a system of <strong>non-linear equations</strong>.</p>
<p>The Jacobian matrix can be used to solve this problem by providing a linear approximation of the relationship between the joint angles and end-effector position. Specifically, we can use the Jacobian transpose to convert the desired end-effector velocity into joint velocities:</p>
<p>$$\dot{q} &#x3D; J^T(x) \cdot \dot{x}$$ where $\dot{q}$ is the joint velocity, $\dot{x}$ is the desired end-effector velocity, and $J^T$ is the transpose of the Jacobian matrix. By iteratively updating the joint angles using the calculated joint velocities, we can converge to a solution that achieves the desired end-effector position.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hujunhan.github.io/MarkdownNotes/Engineering/Robotics/Cognition/Path%20Planning/arm-path/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Junhan Hu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Only Truth Matters">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/MarkdownNotes/Engineering/Robotics/Cognition/Path%20Planning/arm-path/" class="post-title-link" itemprop="url">Path Planning for Robot Arm</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-02-26 15:41:00" itemprop="dateCreated datePublished" datetime="2023-02-26T15:41:00-08:00">2023-02-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-29 23:22:29" itemprop="dateModified" datetime="2023-08-29T23:22:29-07:00">2023-08-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/" itemprop="url" rel="index"><span itemprop="name">MarkdownNotes</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/" itemprop="url" rel="index"><span itemprop="name">Engineering</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/" itemprop="url" rel="index"><span itemprop="name">Robotics</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/Cognition/" itemprop="url" rel="index"><span itemprop="name">Cognition</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/Cognition/Path-Planning/" itemprop="url" rel="index"><span itemprop="name">Path Planning</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Math-Formulation">1. Math Formulation</h2><p>目标：生成一条符合<strong>要求</strong>的轨迹（<strong>点</strong>的集合）</p>
<ul>
<li>目标是根据需求来选择的，一般的会有的需求</li>
<li>时间</li>
<li>joint constraints</li>
<li>避障</li>
<li>点：在三维空间中</li>
</ul>
<h2 id="Library">2. Library</h2><p>OMPL (Open Motion Planning Library)</p>
<ul>
<li>sampling based and optimization based</li>
<li>How: PRM (Probabilistic Roadmaps ), RRT, BIT( Batch Informed Trees)</li>
<li>Input: include the robot’s configuration, the environment</li>
<li>Output: the motion plan, a sequence of robot configuration or trajectories</li>
</ul>
<p>PIMPL (Pilz Industrial Motion Planner)</p>
<ul>
<li>especially designed for industrial robot</li>
</ul>
<p>STOMP (Stochastic Trajectory Optimization for Motion Planning)</p>
<ul>
<li>optimization based, suited for many degree of freedoms</li>
<li>How: iteratively optimizing a random trajectories</li>
</ul>
<p>SBPL (Search-Based Planning Library )</p>
<ul>
<li>search based</li>
<li>How: reprensent the robot and environment as a grid, then use search algorithm like A*, Dijkstra, to explore</li>
</ul>
<p>CHOMP (Covariant Hamiltonian Optimization for Motion Planning )</p>
<ul>
<li>optimization based</li>
<li>How:  based on the Hamiltonian formulation of mechanics and optimizes the Hamiltonian of the system subject to constraints.</li>
</ul>
<h2 id="Math-Basis">3. Math Basis</h2><p>RPM, RRT, BIT, Search, Optmization</p>
<h3 id="Cell-Decomposition">3.1. Cell Decomposition</h3><p>Sample the space into grid, so the problem degrade to a classic search problem</p>
<ul>
<li>Bad for high-dimensional situation</li>
</ul>
<h3 id="Control-based">3.2. Control based</h3><ul>
<li>Fast, can be done in online with minimal error</li>
<li>Difficult to compute with  complex dynamics</li>
</ul>
<h3 id="Potential-Fields">3.3. Potential Fields</h3><p>Simple and intuitive</p>
<ul>
<li>Real time speed</li>
<li>Fail in local minima</li>
</ul>
<h3 id="Sample-Based">3.4. Sample Based</h3><ul>
<li>If the solution exist, the method would find it</li>
</ul>
<p>Some idea: workspace, state space, free state space, ppath</p>
<p>Two type</p>
<ul>
<li>PRM, Using the knowdege of graph</li>
</ul>
<p><img src="https://raw.githubusercontent.com/hujunhan/cloudimage/master/img/20230226181351.png" alt="image-20230226181351316"></p>
<ul>
<li>Tree based</li>
</ul>
<p><img src="https://raw.githubusercontent.com/hujunhan/cloudimage/master/img/20230226181414.png" alt="image-20230226181414617"></p>
<p>Important tool</p>
<ul>
<li>Collision checking</li>
<li>Nearest neighbor</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hujunhan.github.io/MarkdownNotes/Engineering/Robotics/Perception/Camera/SLAM/Robotics-ORB-SLAM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Junhan Hu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Only Truth Matters">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/MarkdownNotes/Engineering/Robotics/Perception/Camera/SLAM/Robotics-ORB-SLAM/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-02-24 22:16:53" itemprop="dateCreated datePublished" datetime="2023-02-24T22:16:53-08:00">2023-02-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-29 23:22:29" itemprop="dateModified" datetime="2023-08-29T23:22:29-07:00">2023-08-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/" itemprop="url" rel="index"><span itemprop="name">MarkdownNotes</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/" itemprop="url" rel="index"><span itemprop="name">Engineering</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/" itemprop="url" rel="index"><span itemprop="name">Robotics</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/Perception/" itemprop="url" rel="index"><span itemprop="name">Perception</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/Perception/Camera/" itemprop="url" rel="index"><span itemprop="name">Camera</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Robotics/Perception/Camera/SLAM/" itemprop="url" rel="index"><span itemprop="name">SLAM</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <hr>
<p>title: Vision Based SLAM a review<br>author: Junhan Hu<br>tags:</p>
<ul>
<li>ov</li>
<li>slam<br>mathjax: true<br>date: 2019-1-6<br>categories:</li>
<li>Engineering</li>
<li>Robotics</li>
<li>Perception</li>
<li>Camera</li>
<li>SLAM</li>
</ul>
<h2 id="1-Introduction">1. 1 Introduction</h2><p>SLAM builds a map and localize the sensor in the map with a strong focus on <strong>real-time operation</strong>.</p>
<p>Camera: cheap and provide rich information of the environment.</p>
<ul>
<li>Monocular camera, cheapest and smallest camera</li>
<li>depth is not observable</li>
<li>scale drift and mail fail if performing pure rotations</li>
<li>RGB-D camera, all these issue can be solved.</li>
<li>Outdoor performance is not good. Usually used in indoor environment</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/MarkdownNotes/Engineering/Robotics/Perception/Camera/SLAM/Robotics-ORB-SLAM/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hujunhan.github.io/MarkdownNotes/Engineering/Computer%20Science/Miscellaneous/real-time/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Junhan Hu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Only Truth Matters">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/MarkdownNotes/Engineering/Computer%20Science/Miscellaneous/real-time/" class="post-title-link" itemprop="url">Real-time System</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-02-22 15:46:00" itemprop="dateCreated datePublished" datetime="2023-02-22T15:46:00-08:00">2023-02-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-29 23:22:29" itemprop="dateModified" datetime="2023-08-29T23:22:29-07:00">2023-08-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/" itemprop="url" rel="index"><span itemprop="name">MarkdownNotes</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/" itemprop="url" rel="index"><span itemprop="name">Engineering</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Computer-Science/" itemprop="url" rel="index"><span itemprop="name">Computer Science</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Computer-Science/Miscellaneous/" itemprop="url" rel="index"><span itemprop="name">Miscellaneous</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Definition">1. Definition</h2><p>From <a target="_blank" rel="noopener" href="https://design.ros2.org/articles/realtime_background.html">ROS2 Design</a></p>
<ul>
<li>Determinism</li>
<li>Deadline</li>
<li>Quality of Service</li>
</ul>
<p>Real-time software guarantees correct computation at the correct time.</p>
<p>It needs 2 parts</p>
<ul>
<li>Real time system</li>
<li>Real time code</li>
</ul>
<p>KEY: <strong>DEADLINE</strong> <a target="_blank" rel="noopener" href="https://roboticsbackend.com/what-are-real-time-constraints-in-robotics/">Ref</a></p>
<ul>
<li>Just finish the job before or after deadline</li>
</ul>
<p><img src="https://raw.githubusercontent.com/hujunhan/cloudimage/master/img/20230419220419_coQeQh.png" alt="Real-time constraints in robotics 3/3"></p>
<h2 id="Coding">2. Coding</h2><p>Low level code:</p>
<ul>
<li>almost everything should be in real-time</li>
</ul>
<p>Decision algorithm:</p>
<ul>
<li>important to implement in some Key decision, like when to stop</li>
</ul>
<p>Synchronization between devices</p>
<ul>
<li>start the motor at the same time</li>
</ul>
<h2 id="Implementation-Consideration">3. Implementation Consideration</h2><ul>
<li>Using Deterministic algorithm</li>
<li>fixed-point arithmetic, state machines, and lookup tables.</li>
<li>Prioritize task</li>
<li>Tasks with lower priority can be preempted or delayed if necessary to allow high-priority tasks to be executed</li>
<li>This is typically achieved through the use of priority-based scheduling algorithms.</li>
<li>Use interrupts</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hujunhan.github.io/MarkdownNotes/Engineering/Mechanics/design-process/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Junhan Hu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Only Truth Matters">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/MarkdownNotes/Engineering/Mechanics/design-process/" class="post-title-link" itemprop="url">Design Process for Robot Arm</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-02-21 20:31:00" itemprop="dateCreated datePublished" datetime="2023-02-21T20:31:00-08:00">2023-02-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-29 23:22:29" itemprop="dateModified" datetime="2023-08-29T23:22:29-07:00">2023-08-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/" itemprop="url" rel="index"><span itemprop="name">MarkdownNotes</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/" itemprop="url" rel="index"><span itemprop="name">Engineering</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MarkdownNotes/Engineering/Mechanics/" itemprop="url" rel="index"><span itemprop="name">Mechanics</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Goal">1. Goal</h2><p>Try to figure out a clear path or best practice for robot arm modeling and programming</p>
<p>Input: the requirements and some consideration, limitation</p>
<p>Output:</p>
<ul>
<li>The robot arm model (the math model for kinematics)</li>
<li>The control algorithm</li>
<li>Kinematics</li>
<li>Invser-Kinematics</li>
<li>Simulation:(webots)</li>
</ul>
<h2 id="Requirements">2. Requirements</h2><ul>
<li>Payload:</li>
<li>Influence: Structure and motor actuator</li>
<li>How: the weight, how far from the center of gravity, <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=larhoalnVSQ">Ref</a></li>
<li><img src="https://raw.githubusercontent.com/hujunhan/cloudimage/master/img/20230221204935.png" alt="image-20230221204934948"></li>
<li>Workspace, <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=_canCYWZPsc">Ref</a></li>
<li>reachable</li>
<li>dexterous</li>
<li><img src="https://raw.githubusercontent.com/hujunhan/cloudimage/master/img/20230221210331.png" alt="image-20230221210331362"></li>
<li>Accuracy: determined by sensor</li>
<li>Speed: model and actuators</li>
<li>Control: software and hardware needed for control and <strong>communication</strong></li>
<li>Cost: materials, components, labor</li>
<li>Safety: vision &#x2F; lidar</li>
<li>Maintenance: repair, parts, mechanical, electrical system</li>
</ul>
<h2 id="Modeling">3. Modeling</h2><h3 id="Format-URDF">3.1. Format? URDF</h3><ul>
<li><strong>URDF: Unified Robot Description Format</strong></li>
<li>Simpler, only the basics like geometry, kinematics, dynamics</li>
<li>SDF: Simulation Description Format</li>
<li>More featured, materials, lighting, camera model, environments</li>
</ul>
<h3 id="URDF-Crash-Course">3.2. URDF Crash Course</h3><p><a target="_blank" rel="noopener" href="https://www.mathworks.com/help/sm/ug/urdf-model-import.html">Matlab Ref</a></p>
<p>XML based</p>
<p>Nested structure, <robot>, <link>, <joint></joint></robot></p>
<ul>
<li><p>Elements, <robot>, <link>, <joint></joint></robot></p>
</li>
<li><p>Attributes, <code>name</code> , <code>rgba</code></p>
</li>
<li><p>Parent and Child could be indicated by the parent and child elements</p>
</li>
<li><p>Model <strong>Topology</strong></p>
</li>
<li><p>No closed-loop Chain: A <link> could only be <strong>one</strong> child of <joint></joint></p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/hujunhan/cloudimage/master/img/20230221223829.png" alt="image-20230221223829402"></p>
<p>Green are optional</p>
<h3 id="URDF-Parser">3.3. URDF Parser</h3><p>XML based file, find the root and iterate over node</p>
<link>  defines the structure of the robot

<p><joint> defines the transformation of the robot</joint></p>
<ol>
<li>Read all the link and joint by their <strong>name</strong></li>
<li>Iterate over joint</li>
<li>calculate the translation, orientation</li>
<li>joint origin descsribe how <strong>two links related</strong>, in default situation</li>
</ol>
<p>&#x3D;&#x3D;So <strong>only the joint</strong> matter the kinematics, the link just matters for physics and simulation&#x3D;&#x3D;</p>
<ul>
<li><p>In many case, the collision and visual should be the same, however it  should not in the following situation</p>
</li>
<li><p>simpler collision for faster processsing</p>
</li>
<li><p>Safe zone, make more room in collision</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Visual</th>
<th>Collision</th>
</tr>
</thead>
<tbody><tr>
<td><img src="https://raw.githubusercontent.com/hujunhan/cloudimage/master/img/20230412223503.png" alt="image-20230412223503445"></td>
<td><img src="https://raw.githubusercontent.com/hujunhan/cloudimage/master/img/20230412223512.png" alt="image-20230412223512348"></td>
</tr>
</tbody></table>
<h3 id="Kinematics">3.4. Kinematics</h3><ol>
<li><p>Get the translation and rotation from the URDF</p>
</li>
<li><p>Apply the forward kinematics</p>
</li>
<li><p>Calculate the forward kinematics from code</p>
</li>
<li><p><del>Simulate the forward kinematics in Webots</del> Hard to get position of the end arm, use python visual instead</p>
</li>
<li><p>Solve the Inverse kinematics</p>
</li>
</ol>
<h2 id="Motion-Planning">4. Motion Planning</h2><h3 id="Inverse-Kinematics">4.1. Inverse Kinematics</h3><p>Problem: many constrains</p>
<p>For 6 or 7 DOF: IKFast, open source, use a approximation, fast and numerically robust solution</p>
<ul>
<li>Fact: the 6D pose constraint on a 6D manipulator has closed form solution</li>
</ul>
<p>For less constrained for inequality constrained, became an <strong>optimization</strong> problem</p>
<ul>
<li>Differential IK</li>
<li>Full IK</li>
</ul>
<h3 id="Trajectory-Optimization">4.2. Trajectory Optimization</h3><p>Not solving the problem independently, the basic idea is to solve in a optimization form,</p>
<h3 id="Sampling-Based">4.3. Sampling Based</h3><h2 id="Implementation">5. Implementation</h2><p>workspace calculation, maybe by sampling?</p>
<ul>
<li>2D to 3D</li>
</ul>
<h2 id="Takeaway">6. Takeaway</h2><p>Make the cost function simple</p>
<p>Write minimal constraints</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Junhan Hu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">345</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">80</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">120</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hujunhan" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hujunhan" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hujunhan98@outlook.com" title="E-Mail → mailto:hujunhan98@outlook.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Junhan Hu</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>




<script src="https://utteranc.es/client.js"
        repo="hujunhan/hujunhan.github.io"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
